<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../css/other_ssas.css">
    <title>Лисья нора: вышивание</title>
  </head>
  <body id="body" onclick="funcInBody(event)" onload="gallery.scrollTo(0,gallery.scrollHeight)">
    <header class='grid_blocks'>
      <img class='sist_i' src="../sistem_image/logo_head.jpg" alt="logo" width="120">
      <div class="button" onclick="noti_menu(event)" style="background-color: #C2A388; background-image: url('../sistem_image/Bell.png')"><a class="Notification" style='display: block'></a></div>
      <a class="button lk" href="My_lk.html" style="padding-top:10px;">Ю</a>
    </header>
    <div class='false_line'></div>
    <div class="grid_blocks Noti_menu" style='visibility: hidden; transform: scaleY(0.000001);'>
      <div>В этом обновлении вам добавились все возможности по направлению: "Графика"</div>
      <div>В этом обновлении вам добавилась "Лисья нора" по направлению: "Вышивание"</div>
    </div>

    <main id='main'>
      <div class="left-line">
        <a href="../index.html"><div class="button" style="background-image: url('../sistem_image/logo_foot.jpg')"></div><p>Главное меню</p></a>
        <a href="foxs hole-obzore.html"><div class="button" style="background-image: url('../sistem_image/fox_hole_but.png')"></div><p>Лисья нора</p></a>
        <a href="lessons.html"><div class="button" style="background-image: url('../sistem_image/less2_but.png')"></div><p>Уроки</p></a>
        <a href="I want to will have new idea.html"><div class="button" style="background-image: url('../sistem_image/rand_but.png')"></div><p>Ищу идею</p></a>
      </div>
      <div class="work_zone">
        <div id='spisok_razd'>
          <a class="button" style="background-image: url('../sistem_image/graffika.png')" href="foxs hole-graffika.html"></a>
          <a class="button active" style="background-image: url('../sistem_image/Embroidery.png')" href="foxs hole-Embroidery.html"></a>
          <a class="button" style="background-image: url('../sistem_image/dot.png')"></a>
          <a class="button" style="background-image: url('../sistem_image/dot.png')"></a>
          <a class="button" style="background-image: url('../sistem_image/dot.png')"></a>
          <a class="button" style="background-image: url('../sistem_image/dot.png')"></a>
          <a class="button" style="background-image: url('../sistem_image/dot.png')"></a>
          <a class="button" style="background-image: url('../sistem_image/dot.png')"></a>
          <a class="button" style="background-image: url('../sistem_image/dot.png')"></a>
        </div>
        <div onclick="spisok_razd.scrollBy(0,75.5)" class="dow"></div>
        <div onclick="spisok_razd.scrollBy(0,-75.5)" class="up"></div>

        <div id='gallery'>
          <div class="your">
            <a></a>
            <div class='img_pst' style="background-image: url('../image/Embroidery/S3n7gJxD9Kt3U6pGjKvU_1KlciRLBLYVBXCYrXBgoymr813tSECh7e_YvTpSRCH1Y5f0zZZbhj9jqtB0YD5elpKG.jpg');">
              <img src="../image/Embroidery/S3n7gJxD9Kt3U6pGjKvU_1KlciRLBLYVBXCYrXBgoymr813tSECh7e_YvTpSRCH1Y5f0zZZbhj9jqtB0YD5elpKG.jpg" style="margin:0; width:100%; visibility: hidden;">
              <div class="like-dis_block">
                <div class="button dislike"></div>
                <div class="button like" style='background-color: rgb(226, 251, 255)'></div>
              </div>
            </div>
          </div>
          <div class="your">
            <a>"Почтовая марка с Авто" если интересно переходи сюда: </a>
            <a class='ssilka' href='https://vk.com/public174792841' >https://vk.com/publi...</a>
            <div class='img_pst' style="background-image: url('../image/Embroidery/slU4Q5e0aWecuIWXfVeTWAqz_INUov7023BoX3GaCyxKFCiI9LF6CqTYzoilvAgTjqwc8xg9rvD9j9C1PNgwOuFF.jpg');">
              <img src="../image/Embroidery/slU4Q5e0aWecuIWXfVeTWAqz_INUov7023BoX3GaCyxKFCiI9LF6CqTYzoilvAgTjqwc8xg9rvD9j9C1PNgwOuFF.jpg" style="margin:0; width:100%; visibility: hidden;">
              <div class="like-dis_block">
                <div class="button dislike"></div>
                <div class="button like"></div>
              </div>
            </div>
          </div>
          <div class="your">
            <a></a>
            <div class='img_pst' style="background-image: url('../image/Embroidery/jzzcB0JfjfiUr3fa_VeZ8PaACyelrZIo-bQXwUBZsdznc71UB_ZFX1kB7A6pwdAOVw2I8HF4SgiqSvnQNrVIMilq.jpg');">
              <img src="../image/Embroidery/jzzcB0JfjfiUr3fa_VeZ8PaACyelrZIo-bQXwUBZsdznc71UB_ZFX1kB7A6pwdAOVw2I8HF4SgiqSvnQNrVIMilq.jpg" style="margin:0; width:100%; visibility: hidden;">
              <div class="like-dis_block">
                <div class="button dislike"></div>
                <div class="button like"></div>
              </div>
            </div>
          </div>
          <div class="your">
            <a>"Городской пейзаж", если хочешь заходи ко мне в группу) </a>
            <a class='ssilka' href='https://vk.com/public174792841' >https://vk.com/publi...</a>
            <div class='img_pst' style="background-image: url('../image/Embroidery/917EXbtFLRA6zmqupmOC6A5de-5oTgLmH2f7Rpy9pW-DCzGats4UYUW-d-YVuS_sH9mF5nJup3-aQMMsKyE_5zf_.jpg');">
              <img src="../image/Embroidery/917EXbtFLRA6zmqupmOC6A5de-5oTgLmH2f7Rpy9pW-DCzGats4UYUW-d-YVuS_sH9mF5nJup3-aQMMsKyE_5zf_.jpg" style="margin:0; width:100%; visibility: hidden;">
              <div class="like-dis_block">
                <div class="button dislike"></div>
                <div class="button like" style='background-color: rgb(226, 251, 255)'></div>
              </div>
            </div>
          </div>
        </div>

        <div class="pole_vvoda">
          <div onclick="your_files.click()" style="background-image: url('../sistem_image/scr.png'); background-size: cover;"></div>
          <input type="text" id="text_maseje"></input>
          <div style="background-image: url('../sistem_image/air_plan.png'); background-size: cover;" onclick="poster()"></div>
          <input type="file" id="your_files" accept="image/png, image/jpeg">
        </div>

        <div class="I_want_to_tall">Напоминаем, что вводить текст нужно в одну строку.</div>
      </div>

    </main>

    <footer class="grid_blocks">
      <a class="button" style="background-image: url('../sistem_image/VK.png')" href="https://vk.com/public164057070"></a>
      <a class="button" style="background-image: url('../sistem_image/you.png')" href="https://www.youtube.com/channel/UCM-0ikAGd_lXMmQkl4qFVjw"></a>
      <img class='sist_i' src="../sistem_image/logo_foot.jpg" alt="logo" width="120">
    </footer>
    <script>
      let openEl='none', openEl2, alt, dot, dis_block='none'
      body.getElementsByTagName('header')[0].children[1].getElementsByClassName('Notification')[0].textContent = body.getElementsByClassName('Noti_menu')[0].children.length
      your_files.oninput = function() {your_files.parentElement.children[0].style.backgroundImage= 'url('+URL.createObjectURL(your_files.files[0])+')'}

      function noti_menu(event){
        var tar=event.target.parentElement.parentElement.parentElement
        var tar_child=tar.getElementsByClassName('Noti_menu')[0]

        if (tar_child.style.visibility!='hidden'){
          tar_child.style.transform='scaleY(0.000001)'
          tar_child.style.visibility='hidden'
          event.target.getElementsByClassName('Notification')[0].style.display='none'
        }
        else{
          tar_child.style.visibility='visible'
          tar_child.style.transform='scaleY(1)'
        }
      }

      function funcInBody(event){
        let target = event.target

        if(dis_block!='none' && target.className=='dise_vvod'){
          if (dis_block.getElementsByClassName('dis_bl')[0].children[0].value=='') {
            alert('Сообщение не введено')
            return
          }
          else{
            dis_block.getElementsByClassName('img_pst')[0].getElementsByClassName('like-dis_block')[0].children[0].style.backgroundColor='#f2dfcf'
            dis_block.getElementsByClassName('dis_bl')[0].remove()
            dis_block='none'
            return
          }
        }
        if (dis_block!='none' && target.parentElement.className!='dis_bl'){
          dis_block.getElementsByClassName('dis_bl')[0].remove()
          dis_block='none'
        }

        if (openEl!='none'){
          openEl.removeAttribute("style")
          openEl.children[0].style.display='none'
          if (openEl.className == 'your'){
            if (alt.children[1].className=='ssilka'){alt.getElementsByClassName('ssilka')[0].removeAttribute("style")}
            openEl.getElementsByClassName('like-dis_block')[0].removeAttribute("style")
          }
          else {
            if (alt.children[2].className=='ssilka'){alt.getElementsByClassName('ssilka')[0].removeAttribute("style")}
            if (openEl.getElementsByClassName('comments')[0].children.length!=0){openEl.getElementsByClassName('comments')[0].removeAttribute("style")}
            openEl.children[1].removeAttribute('style')
          }
          openEl='none'
          openEl2.removeAttribute("style")
          return
        }
        if (target.className=='button delited') delit_img(event)
        if ((target.parentElement.className == 'your' && target.tagName!='INPUT' && (target.className!='ssilka')) || (target.parentElement.className == 'mine' && target.parentElement.className!='comments') && (target.className!='ssilka')){
          galeryImage(target)
          return
        }
        if (target.className == 'button dislike') diselike_but(event)
        if (target.className == 'button like'){
          if (target.style.backgroundColor != 'rgb(226, 251, 255)') target.style.backgroundColor='#e2fbff'
          else target.removeAttribute("style")
        }

      }

      function galeryImage(target){
        alt=target.parentElement
        dot=alt.children[0]
        alt.style.display='block'
        alt.children[0].style.display='none'
        if (alt.className == 'your') {
          if (alt.children[1].className=='ssilka'){alt.getElementsByClassName('ssilka')[0].style.display='none'}
          target.getElementsByClassName('like-dis_block')[0].style.display='none'
        }
        else {
          if (alt.children[2].className=='ssilka'){alt.getElementsByClassName('ssilka')[0].style.display='none'}
          alt.getElementsByClassName('comments')[0].style.display='none'
          alt.children[1].style.display='none'
        }
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){
          alt.style.width='100%'
          alt.style.left= ((window.innerWidth/2)-alt.scrollWidth/2-45)*0.5/(window.innerWidth/2)*100+'%'
        }
        else{
          if (window.innerWidth<769) {
            if (window.innerWidth<500){
              alt.style.width='100%'
              alt.style.left= ((window.innerWidth/2)-alt.scrollWidth/2-45)*0.5/(window.innerWidth/2)*100+'%'
            }
            else{
              alt.style.width=(window.innerHeight-170)*0.6/target.scrollHeight*100+'%'
              alt.style.left= ((window.innerWidth/2)-alt.scrollWidth/2-60)*0.5/(window.innerWidth/2)*100+'%'
            }
          }
          else {
            alt.style.width=(window.innerHeight-204)*0.4/target.scrollHeight*100+'%'
            alt.style.left= ((window.innerWidth/2)-alt.scrollWidth/2-100)*0.5/(window.innerWidth/2)*100+'%'
          }
        }
        stili(alt, dot)
        openEl=alt
        openEl2=dot
      }

      function stili(target, tar2){
        tar2.style.display= 'none';
        target.style.position= 'fixed';
        target.style.top= 0;
        target.style.margin= 0;
        target.style.zIndex= 1;
        target.style.boxShadow= '0px 0px 1500px 80px #1b4a4b';
        dot.style.display= 'none';
        target.parentElement.style.verticalAlign='middle';
      }

      function delit_img(event){
        var trg=event.target;
        trg.parentElement.remove()
      }

      function diselike_but(event){
        if (event.target.style.backgroundColor=='rgb(242, 223, 207)') return
        dis_block=event.target.parentElement.parentElement.parentElement
        var trg=event.target;

        var element_div = document.createElement('div')
        element_div.classList.add('dis_bl')
        element_div.style.marginBottom='3px'
        dis_block.appendChild(element_div)

        var element_input = document.createElement('input')
        element_input.type='text'
        dis_block.getElementsByClassName('dis_bl')[0].appendChild(element_input)

        var element_div = document.createElement('div')
        element_div.classList.add("dise_vvod")
        element_div.style.backgroundImage='url("../sistem_image/air_plan.png")'
        dis_block.getElementsByClassName('dis_bl')[0].appendChild(element_div)
      }

      function poster(){
        if (your_files.value=='') alert('Файл не выбран')
        else{
          var element_div = document.createElement('div')
          var text='', sss_text='', str=text_maseje.value+'  '
          if (str.includes('https://')==true){
            var n=str.length, vivod=str.split("")
            for (let i=0; i<n; i++){
              if ((vivod[i]=='h')&&(vivod[i+1]=='t')&&(vivod[i+2]=='t')&&(vivod[i+3]=='p')&&(vivod[i+4]=='s')){
                if ((vivod[i+5]==':')&&(vivod[i+6]=='/')&&(vivod[i+7]=='/')&&(vivod[i+8]!=' ')&&(vivod[i+8]!='/')){
                  while (vivod[i]!=' ' && vivod[i]!=';' && vivod[i]!=','){
                    sss_text=sss_text+vivod[i]
                    if (sss_text.length==20) var krat_s=sss_text+'...'
                    i++
                  }
              }}
              text=text+vivod[i]
            }
          }

          element_div.classList.add('mine')
          gallery.appendChild(element_div);

          var element_a = document.createElement('a')
          gallery.children[(gallery.children.length)-1].appendChild(element_a)

          var element_div = document.createElement('div')
          element_div.classList.add("button","delited")
          gallery.children[(gallery.children.length)-1].appendChild(element_div)

          if (sss_text!=''){
            var element_a = document.createElement('a')
            element_a.classList.add('ssilka')
            element_a.href= sss_text
            gallery.children[(gallery.children.length)-1].appendChild(element_a)
            if (sss_text.length<20) gallery.children[(gallery.children.length)-1].children[2].textContent=sss_text
            else gallery.children[(gallery.children.length)-1].children[2].textContent=krat_s
          }

          var element_div = document.createElement('div')
          element_div.classList.add('comments')
          element_div.style.display='none'
          gallery.children[(gallery.children.length)-1].appendChild(element_div)


          var element_div = document.createElement('div')
          element_div.classList.add('img_pst')
          element_div.style.backgroundImage= 'url('+URL.createObjectURL(your_files.files[0])+')'
          element_div.style.backgroundRepeat='no-repeat'
          element_div.style.backgroundSize='contain'
          gallery.children[(gallery.children.length)-1].appendChild(element_div)

          var element_img = document.createElement('img')
          element_img.style.margin= 0
          element_img.style.width='100%'
          element_img.style.visibility='hidden'
          element_img.src=URL.createObjectURL(your_files.files[0])
          if (sss_text!=''){gallery.children[(gallery.children.length)-1].children[4].appendChild(element_img)}
          else{gallery.children[(gallery.children.length)-1].children[3].appendChild(element_img)}

          if (text!='') gallery.children[(gallery.children.length)-1].children[0].textContent=text
          else gallery.children[(gallery.children.length)-1].children[0].textContent=text_maseje.value

          text_maseje.value=''
          your_files.value=''
          your_files.parentElement.children[0].style.backgroundImage="url('../sistem_image/scr.png')"

          gallery.scrollTop = gallery.scrollHeight;
        }
      }

    </script>
  </body>
</html>
